<!DOCTYPE html>
<html lang="en">

<!-- Head tag -->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/ironman-draw.png">
    <!-- Place this tag in your head or just before your close body tag. -->
    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <title>
        
          [设计模式]Android设计模式 - 郭伟 | Blog
        
    </title>

    <link rel="canonical" href="http://www.helloblog.top/article/Android设计模式/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS --> 
    <link rel="stylesheet" href="/css/beantech.min.css">

    <link rel="stylesheet" href="/css/donate.css">
    
    <!-- Pygments Highlight CSS -->
    <link rel="stylesheet" href="/css/highlight.css">

    <link rel="stylesheet" href="/css/widget.css">

    <link rel="stylesheet" href="/css/rocket.css">

    <link rel="stylesheet" href="/css/signature.css">

    <link rel="stylesheet" href="/css/toc.css">

    <!-- Custom Fonts -->
    <!-- <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="https://cdn.staticfile.org/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- Hux Delete, sad but pending in China
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/
    css'>
    -->


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">
	<!-- Modified by Yu-Hsuan Yen -->
<!-- Post Header -->
<style type="text/css">
    header.intro-header{
        
            background-image: url('https://res.cloudinary.com/helloblog/image/upload/v1558966028/20190527/photo-1555284023-249222086985_krzpbb.jpg')
            /*post*/
        
    }
    
</style>

<header class="intro-header" >
    <!-- Signature -->
    <div id="signature">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                
                    <div class="post-heading">
                        <div class="tags">
                            
                              <a class="tag" href="/tags/#设计模式" title="设计模式">设计模式</a>
                            
                        </div>
                        <h1>[设计模式]Android设计模式</h1>
                        <h2 class="subheading"></h2>
                        <span class="meta">
                            Posted by 郭伟 on
                            2019-05-27
                        </span>
                    </div>
                


                </div>
            </div>
        </div>
    </div>
</header>

	
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">郭伟</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <!-- Known Issue, found by Hux:
            <nav>'s height woule be hold on by its content.
            so, when navbar scale out, the <nav> will cover tags.
            also mask any touch event of tags, unfortunately.
        -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>

                    

                        
                    

                        
                        <li>
                            <a href="/about/">About</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/archive/">Archives</a>
                        </li>
                        
                    

                        
                        <li>
                            <a href="/tags/">Tags</a>
                        </li>
                        
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    $toggle.addEventListener('click', handleMagic)
    function handleMagic(e){
        if ($navbar.className.indexOf('in') > 0) {
        // CLOSE
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        }else{
        // OPEN
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }
</script>


    <!-- Main Content -->
    <!-- Modify by Yu-Hsuan Yen -->

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

            <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <blockquote>
<p>想写记录一篇记录Android设计模式的文章的念头由来已久，也许是从我开始接触Android开发后就有了，于是很早就在自己的笔记上记录一些相关学习心得。</p>
</blockquote>
<p>创建型设计模式:<br>
<a href="#2%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">工厂方法模式</a><br>
<a href="#1%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F">单例模式</a></p>
<h1 id="第一章-走向灵活软件之路面向对象的六大原则">第一章 走向灵活软件之路–面向对象的六大原则</h1>
<h2 id="单一职责原则-srp"><code>单一职责原则 SRP</code></h2>
<blockquote>
<p>单一职责原则的英文名是Single Re-sponsibility Principle, 简称SRP.  这个设计原则备受争议, 而争议之处就是对职责的定义,什么是类的职责,以及怎么划分类的职责. 单一职责原则最难划分的是就是职责,一个职责一个接口,但问题是&quot;职责&quot;没有一个量化的标准,一个类到底要负责哪些职责?这些职责该怎么细化?细化后是否都要有一个接口或类? 这些都要从实际的项目去考虑.</p>
</blockquote>
<p>单一职责原则的优点:<br>
■ 类的复杂性降低,实现什么职责都有清晰明确的定义了;<br>
■ 可读性提高,复杂性降低.<br>
■ 可维护性提高,可读性提高.<br>
■ 变更引起的风险降低,项目变更是必不可少的,如果接口单一职责做的好,一个接口修改只对相应的类有影响,对其他的接口无影响,这对系统的扩展性和维护性有很大的帮助.</p>
<p>注意: 单一职责原则提出了一个编写程序的标准,用&quot;职责&quot;或&quot;变化原因&quot;来衡量接口或者类设计得是否优良,但是&quot;职责&quot;和&quot;变化原因&quot;都是不可度量的.因项目而异.</p>
<h2 id="里氏替换原则-lsp"><code>里氏替换原则 LSP</code></h2>
<blockquote>
<p>如果对每一个类型为S的对象o1,都有类型为T的对象o2,使得以T定义所有程序P在所有的对象o1都换成o2时,程序P的行为没有发生变化,那么类型S是类型T的子类型.<br>
所有引用基类的地方必须能透明地使用其子类对象.</p>
</blockquote>
<p>我们都知道面向对象有三大特点:封装,继承,多态,里氏替换原则就是依赖于继承与多态这两大特性,里氏替换原则简单来讲就是,所有引用基类的地方必须能透明地使用其子类对象,通俗点来说,只要父类能出现的<br>
地方子类就可以出现,而且替换成子类也不会产生任何错误或异常,使用者根本不需要知道是父类或者是子类.但是反过来就不行,有子类出现的地方父类未必能适应.</p>
<h3 id="示例">示例</h3>
<p><img src="https://res.cloudinary.com/helloblog/image/upload/v1559661444/20190528/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/class_diagram_xvn13o.png" alt="里氏替换原则"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//窗口类</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Window</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(View child)</span></span>&#123;</span><br><span class="line">         child.draw();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//建立视图对象,测量视图宽高为公用代码,绘制实现交给具体的子类</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">measure</span><span class="params">(<span class="keyword">int</span> width,<span class="keyword">int</span> height)</span></span>&#123;</span><br><span class="line">    <span class="comment">//测量视图大小</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Button</span> <span class="keyword">extends</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TextView</span> <span class="title">exnteds</span> <span class="title">View</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">draw</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>上述示例中,Window依赖View,而View定义了一个视图抽象,measure是各个子类共享的方法,子类通过复写View的draw方法实现具有各自特色的功能,在这里,这个功能就是绘制自身内容,任何继承View的子类都可以设置给show方法,<br>
就是所说的<code>里氏替换</code>,通过<code>里氏替换</code>就可以自定义各式各样的View,然后传递给Window,Window负责组织View,并将View显示到屏幕上.<br>
<code>里氏原则</code>核心原理就是抽象,抽象又依赖继承这个特性,所以优缺点都相当明显了.</p>
<h4 id="优点">优点:</h4>
<pre><code>    1)代码重用,减少创建类的成本,每个子类都有父类的方法和属性;
    2)子类与父类基本相似,但又与父类有所区别
    3)提高代码扩展性
</code></pre>
<h4 id="缺点">缺点:</h4>
<pre><code>    1)继承是侵入性的,只要继承就必须拥有父类的所有属性和方法;
    2)可能造成子类代码冗余,灵活性降低,因为子类必须拥有父类的所有属性和方法;
</code></pre>
<hr>
<h2 id="依赖倒置原则-dip"><code>依赖倒置原则 DIP</code></h2>
<blockquote>
<p>依赖倒置原则英文全称是<code>Dependence Inversion Principle</code>,缩写就是DIP.<br>
依赖倒置原则指代了一种特定的解耦方式,使得高层次的模块不依赖于低层次的模块的实现细节的目的,依赖模块被颠倒了.<br>
关键点:<br>
1) 高层模块不应该依赖底层模块,两者都应该依赖其抽象.<br>
2) 抽象不应该依赖细节.<br>
3) 细节应该依赖细节.</p>
</blockquote>
<p>在Java语言中,抽象就是指接口或者抽象类,两者都是不能直接被实例化的;细节就是实现类,实现接口或者继承抽象类而产生的的类就是细节,其特点就是,可以直接被实例化,也就是可以加上一个关键字 new 产生一个对象.高层模块就是具体实现类.<br>
<code>依赖倒置原则</code>在JAVA语言中的表现是: <code>模块间的依赖通过抽象发生,实现类之间不发生直接的依赖关系,其依赖关系是通过抽象类或者接口产生</code>,用一句话来概述:<code>面向接口编程,或者说是面向抽象编程.</code></p>
<h3 id="示例">示例</h3>
<p><img src="https://res.cloudinary.com/helloblog/image/upload/v1559748503/20190528/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/class_diagram_rlllnu.png" alt="依赖倒置原则"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ImageCache</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">get</span><span class="params">(String url)</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String url, Bitmap bitmap)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MemoryCache</span> <span class="keyword">implements</span> <span class="title">ImageCache</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">get</span><span class="params">(String url)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String url, Bitmap bitmap)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DiskCache</span> <span class="keyword">implements</span> <span class="title">ImageCache</span> </span>&#123;</span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Bitmap <span class="title">get</span><span class="params">(String url)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(String url, Bitmap bitmap)</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ImageLoader</span> </span>&#123;</span><br><span class="line">    <span class="comment">//图片缓存类依赖抽象,并且有一个默认的实现</span></span><br><span class="line">    ImageCache mCache = <span class="keyword">new</span> MemoryCache();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">displayImage</span><span class="params">(String url, ImageView imageview)</span></span>&#123;</span><br><span class="line">        Bitmap bitmap = mCache.get(url);</span><br><span class="line">        <span class="keyword">if</span>(bitmap == <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="comment">//异步加载图片</span></span><br><span class="line">            ....</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          imageview.setImageBitmap(bitmap);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置缓存策略,依赖于抽象</span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setImageCache</span><span class="params">(ImageCache cache)</span> </span>&#123;</span><br><span class="line">        mCache = cache;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>依赖倒置原则需要遵循的规则:<br>
● 每个类尽量都有接口或抽象类,或者抽象类和接口两者都具备,这是<code>依赖倒置</code>的基本要求,接口和抽象都是属于抽象的,有了抽象才可能<code>依赖倒置</code>;<br>
● 变量的表面类型尽量是接口或者是抽象类;<br>
● 任何类都不应该从具体类派生;<br>
● 尽量不要复写基类的方法;</p>
<p>总结: 如果类与类直接依赖于细节,那么他们之间就有耦合,当具体实现需要变化时,意味着要同事修改依赖者的代码.这限制了系统的扩展性.</p>
<hr>
<h2 id="开闭原则"><code>开闭原则</code></h2>
<h2 id="接口隔离原则"><code>接口隔离原则</code></h2>
<h2 id="迪米特法则"><code>迪米特法则</code></h2>
<hr>
<h1 id="第二章-二十三种设计模式">第二章 二十三种设计模式</h1>
<h2 id="单例模式"><code>单例模式</code></h2>
<h3 id="单例模式的定义">单例模式的定义</h3>
<blockquote>
<p>单例模式(Singleton Pattern)是一个比较简单的模式,其定义如下:<br>
Ensure a class has only one instance,and provider a global point of access to it.(确保某一个类只有一个实例,而且自行实例化并向整个系统提供这个实例).</p>
</blockquote>
<p>单例模式的通用类如图所示:<br>
<img src="https://res.cloudinary.com/helloblog/image/upload/v1559138347/20190528/Singleton_Pattern_jemey1.png" alt="单例模式通用类"><br>
Singleton 类称为单例类,通过使用private的构造函数确保了在一个应用中只产生一个实例,并且是自行实例化的(在Singleton 中自己使用new Singleton()),<br>
单例模式的通用源代码如下:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Singleton singleton = <span class="keyword">new</span> Singleton();</span><br><span class="line">	<span class="comment">//限制产生多个对象</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通过该方法获得实例对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">return</span> singleton;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//类中其他方法,尽量是static</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">doSomething</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="单例模式的应用">单例模式的应用</h3>
<p>单例模式的优点:</p>
<p>■ 由于单例模式在内存中只有一 个实例,减少了内存开支,特别是一个对象需要频繁地创建或销毁时,而且创建或销毁时性能又无法优化,单例模式的优势就非常明显了.<br>
■ 由于单例模式只产生一个实例,所以减少了系统的性能开销,当一个对象的产生需要比较多资源时,如读取配置,产生其他依赖对象时,则可以通过应用在启动时直接产生一个单例对象,然后用永久驻留内存的方式来解决(在Java EE中采用单例模式时需要注意JVM垃圾回收机制).<br>
■ 单例模式可以避免对资源的多重占用,例如一个写文件的动作,由于只有一个实例存在内存中,避免对同一个资源文件同时写操作.<br>
■ 单例模式可以在系统设置全局的访问点,优化和共享资源访问,例如可以设计一个单例类,负责所有数据表映射处理.</p>
<p>单例模式的缺点:</p>
<p>■ 单例模式一般没有接口,扩展很困难,若要扩展,除了修改代码基本上没有第二种途径可以实现,单例模式为什么不能增加接口呢?因为接口对单例模式是没有任何意义的,它要求&quot;自行实例化&quot;,并且提供单一实例.接口或抽象类是不可能被实例化的,当然,在特殊的情况下,单例模式可以实现接口,被继承等,需要在系统开发中根据环境判断.<br>
■ 单例模式对测试是不利的,在并行开发环境中,如果单例模式没有完成,是不能进行测试的,没有接口也不能使用mock的方式虚拟一个对象.<br>
■ 单例模式与单一职责原则有冲突,一个类应该只实现一个逻辑,而不关心它是否是单例的,是不是单例取决于环境,单例模式把&quot;要单例&quot;和业务逻辑融合在一个类中.</p>
<p>单例模式的使用场景:</p>
<blockquote>
<p>在一个系统中要求一个类有且仅有一个对象,如果出现多个对象就会出现&quot;不良反应&quot;,可以使用单例模式,具体使用场景如下:</p>
</blockquote>
<p>■ 要求生成唯一序列号的环境<br>
■ 在整个项目中需要一个共享访问点或共享数据,<br>
■ 创建一个对象需要消耗资源过多,如要访问IO和数据库等资源.<br>
■ 需要定义大量的静态常量和静态方法,可以采用单例模式.</p>
<p>单例模式的注意事项:</p>
<blockquote>
<p>在高并发情况下,需要注意单例模式的线程同步问题,单例模式有集中不同的实现方式.下面列举个线程不安全的例子.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">static</span> Singleton singleton = <span class="keyword">null</span>;</span><br><span class="line">	<span class="function"><span class="keyword">private</span> <span class="title">Singleton</span><span class="params">()</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//通过该方法获取实例对象</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title">getSingleton</span><span class="params">()</span></span>&#123;</span><br><span class="line">    	<span class="keyword">if</span>(singleton == <span class="keyword">null</span>)&#123;</span><br><span class="line">    		singleton =  <span class="keyword">new</span> Singleton();</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> singleton</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>该单例模式在低并发情况下不会出现问题,若系统压力增大,并发量增加则可能在内存中存在多个实例,为什么会出现这种情况?<br>
如果一个线程A执行到<code>singleton = new Singleton</code>,但还没有获得对象(对象初始化需要时间),第二个线程B也在执行,执行到<code>singleton = null</code>判断,那么线程B获得判断因为是<code>true</code>,于是继续运行下去,线程A获得一个对象,线程B也获得一个对象,那么内存中就存在两个对象了.</p>
<p>解决线程不安全的方法: 可以在<code>getSingleton()</code>方法前面加<code>synchronized</code>关键字,或者在<code>getSingleton</code>方法内增加<code>synchroized</code>关键字.</p>
<h2 id="工厂方法模式"><code>工厂方法模式</code></h2>
<blockquote>
<p>工厂方法模式(Factory Pattern) ,是创建型设计模式之一.工厂方法模式是一种结构简单的模式,如Android的Activity的<code>onCreate()</code>就是一个工厂方法.</p>
</blockquote>
<h3 id="工厂方法模式的定义">工厂方法模式的定义</h3>
<blockquote>
<p>定义一个用于创建对象的接口,让子类决定实例化哪个类.</p>
</blockquote>
<h3 id="工厂方法的uml类图">工厂方法的UML类图</h3>
<p><img src="https://res.cloudinary.com/helloblog/image/upload/v1560265205/20190528/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/Factory_Pattern_zvoxlg.png" alt="工厂方法模式"></p>
<h3 id="工厂方法模式的应用">工厂方法模式的应用</h3>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 抽象产品类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 产品类的抽象方法,具体由产品类去实现</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 具体实现类A</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductA</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">     System.out.println(<span class="string">"我是产品A"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 具体实现类B</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteProductB</span> <span class="keyword">extends</span> <span class="title">Product</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我是产品B"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *抽象工厂类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 抽象工厂方法,具体由子类去实现</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> Product <span class="title">createProduct</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 具体工厂类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ConcreteFactory</span> <span class="keyword">extends</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Product <span class="title">createProduct</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 客户类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Factory  factory = <span class="keyword">new</span> ConcreteFactory();</span><br><span class="line">        Product  p = factory.createProduct();</span><br><span class="line">        p.method();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>这里几个角色主要分为四大模块:<br>
<code>抽象工厂</code>其为工厂方法模式的核心;<br>
<code>具体工厂</code>其实现了具体业务逻辑;<br>
<code>抽象产品</code>是工厂方法模式所创建的产品的父类;<br>
<code>具体产品</code>为实现抽象产品的某个具体产品对象;</p>
<p>上面的<a href="#2%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">工厂方法模式</a>也可以使用反射的方式更简洁的创建出来:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *抽象工厂类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Factory</span> </span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 抽象工厂方法,具体由子类去实现</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">abstract</span> &lt;T extends Product&gt; <span class="function">T <span class="title">createProduct</span><span class="params">(Class&lt;T&gt; clz)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 客户类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Factory factory = <span class="keyword">new</span> ConcreteFactory();</span><br><span class="line">        Product p = factory.createProduct(ConcreteProductA.class);</span><br><span class="line">        p.method();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="工厂方法模式的优点">工厂方法模式的优点</h3>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1.</span><span class="string">良好的封装性,代码结构清晰,一个对象的创建是有条件约束的;</span></span><br><span class="line"><span class="number">2.</span><span class="string">降低模块间的耦合;</span></span><br><span class="line"><span class="number">3.</span><span class="string">有良好的扩展性;</span></span><br></pre></td></tr></table></figure>
<p>工厂方法模式是典型的解耦框架.高层模块需要知道产品的抽象类,其他的实现类都不用关心,符合:<br>
<a href="#%E8%BF%AA%E7%B1%B3%E7%89%B9%E6%B3%95%E5%88%99">迪米特法则</a>,我不需要的就不要交流;<br>
<a href="#%E4%BE%9D%E8%B5%96%E5%80%92%E7%BD%AE%E5%8E%9F%E5%88%99">依赖倒置原则</a>,只依赖产品类的抽象;<br>
<a href="#%E9%87%8C%E6%B0%8F%E6%9B%BF%E6%8D%A2%E5%8E%9F%E5%88%99">里氏替换原则</a>使用产品子类替换产品父类;</p>
<h3 id="工厂方法模式使用场景">工厂方法模式使用场景</h3>
<p>工厂方法模式是<code>new</code>一个对象的替代品,所有需要生成对象的地方都可以使用,但是需要慎重地考虑是否需要增加一个工厂类进行管理,增加代码复杂度;<br>
需要灵活的,可扩展性的框架是,可以考虑采用<a href="#2%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F">工厂方法模式</a>,比如邮件服务器框架,异构项目;</p>

                

                <hr>
                <!-- Pager -->
                <ul class="pager">
                    
                        <li class="previous">
                            <a href="/article/单一职责原则/" data-toggle="tooltip" data-placement="top" title="[设计模式]单一职责原则">&larr; Previous Post</a>
                        </li>
                    
                    
                        <li class="next">
                            <a href="/article/5月/Hexo写作/" data-toggle="tooltip" data-placement="top" title="[Hexo]写作">Next Post &rarr;</a>
                        </li>
                    
                </ul>

                <br>

                <!--打赏-->
                
                <!--打赏-->

                <br>
                <!--分享-->
                
                    <div class="social-share"  data-wechat-qrcode-helper="" align="center"></div>
                    <!--  css & js -->
                    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/css/share.min.css">
                    <script src="https://cdnjs.cloudflare.com/ajax/libs/social-share.js/1.0.16/js/social-share.min.js"></script>
                
                <!--分享-->
                <br>                       
                
                <!-- require APlayer -->
                

                <!-- duoshuo Share start -->
                
                <!-- 多说 Share end-->

                <!-- 多说评论框 start -->
                
                <!-- 多说评论框 end -->

                <!-- disqus comment start -->
                
                <!-- disqus comment end -->

                

            </div>
            
            <!-- Tabe of Content -->
            <!-- Table of Contents -->

  
    
      <aside id="sidebar">
        <div id="toc" class="toc-article">
        <strong class="toc-title">Contents</strong>
        
          <ol class="toc-nav"><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#第一章-走向灵活软件之路面向对象的六大原则"><span class="toc-nav-number">1.</span> <span class="toc-nav-text">&#x7B2C;&#x4E00;&#x7AE0; &#x8D70;&#x5411;&#x7075;&#x6D3B;&#x8F6F;&#x4EF6;&#x4E4B;&#x8DEF;&#x2013;&#x9762;&#x5411;&#x5BF9;&#x8C61;&#x7684;&#x516D;&#x5927;&#x539F;&#x5219;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#单一职责原则-srp"><span class="toc-nav-number">1.1.</span> <span class="toc-nav-text"><code>&#x5355;&#x4E00;&#x804C;&#x8D23;&#x539F;&#x5219; SRP</code></span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#里氏替换原则-lsp"><span class="toc-nav-number">1.2.</span> <span class="toc-nav-text"><code>&#x91CC;&#x6C0F;&#x66FF;&#x6362;&#x539F;&#x5219; LSP</code></span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#示例"><span class="toc-nav-number">1.2.1.</span> <span class="toc-nav-text">&#x793A;&#x4F8B;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#优点"><span class="toc-nav-number">1.2.1.1.</span> <span class="toc-nav-text">&#x4F18;&#x70B9;:</span></a></li><li class="toc-nav-item toc-nav-level-4"><a class="toc-nav-link" href="#缺点"><span class="toc-nav-number">1.2.1.2.</span> <span class="toc-nav-text">&#x7F3A;&#x70B9;:</span></a></li></ol></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#依赖倒置原则-dip"><span class="toc-nav-number">1.3.</span> <span class="toc-nav-text"><code>&#x4F9D;&#x8D56;&#x5012;&#x7F6E;&#x539F;&#x5219; DIP</code></span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#示例"><span class="toc-nav-number">1.3.1.</span> <span class="toc-nav-text">&#x793A;&#x4F8B;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#开闭原则"><span class="toc-nav-number">1.4.</span> <span class="toc-nav-text"><code>&#x5F00;&#x95ED;&#x539F;&#x5219;</code></span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#接口隔离原则"><span class="toc-nav-number">1.5.</span> <span class="toc-nav-text"><code>&#x63A5;&#x53E3;&#x9694;&#x79BB;&#x539F;&#x5219;</code></span></a></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#迪米特法则"><span class="toc-nav-number">1.6.</span> <span class="toc-nav-text"><code>&#x8FEA;&#x7C73;&#x7279;&#x6CD5;&#x5219;</code></span></a></li></ol></li><li class="toc-nav-item toc-nav-level-1"><a class="toc-nav-link" href="#第二章-二十三种设计模式"><span class="toc-nav-number">2.</span> <span class="toc-nav-text">&#x7B2C;&#x4E8C;&#x7AE0; &#x4E8C;&#x5341;&#x4E09;&#x79CD;&#x8BBE;&#x8BA1;&#x6A21;&#x5F0F;</span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#单例模式"><span class="toc-nav-number">2.1.</span> <span class="toc-nav-text"><code>&#x5355;&#x4F8B;&#x6A21;&#x5F0F;</code></span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#单例模式的定义"><span class="toc-nav-number">2.1.1.</span> <span class="toc-nav-text">&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x5B9A;&#x4E49;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#单例模式的应用"><span class="toc-nav-number">2.1.2.</span> <span class="toc-nav-text">&#x5355;&#x4F8B;&#x6A21;&#x5F0F;&#x7684;&#x5E94;&#x7528;</span></a></li></ol></li><li class="toc-nav-item toc-nav-level-2"><a class="toc-nav-link" href="#工厂方法模式"><span class="toc-nav-number">2.2.</span> <span class="toc-nav-text"><code>&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;</code></span></a><ol class="toc-nav-child"><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#工厂方法模式的定义"><span class="toc-nav-number">2.2.1.</span> <span class="toc-nav-text">&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x7684;&#x5B9A;&#x4E49;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#工厂方法的uml类图"><span class="toc-nav-number">2.2.2.</span> <span class="toc-nav-text">&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x7684;UML&#x7C7B;&#x56FE;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#工厂方法模式的应用"><span class="toc-nav-number">2.2.3.</span> <span class="toc-nav-text">&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x7684;&#x5E94;&#x7528;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#工厂方法模式的优点"><span class="toc-nav-number">2.2.4.</span> <span class="toc-nav-text">&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x7684;&#x4F18;&#x70B9;</span></a></li><li class="toc-nav-item toc-nav-level-3"><a class="toc-nav-link" href="#工厂方法模式使用场景"><span class="toc-nav-number">2.2.5.</span> <span class="toc-nav-text">&#x5DE5;&#x5382;&#x65B9;&#x6CD5;&#x6A21;&#x5F0F;&#x4F7F;&#x7528;&#x573A;&#x666F;</span></a></li></ol></li></ol></li></ol>
        
        </div>
      </aside>
    

                
            <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                
                <section>
                    <!-- no hr -->
                    <h5><a href="/tags/">FEATURED TAGS</a></h5>
                    <div class="tags">
                       
                          <a class="tag" href="/tags/#设计模式" title="设计模式">设计模式</a>
                        
                    </div>
                </section>
                

                <!-- Friends Blog -->
                
            </div>
        </div>
    </div>
</article>








<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("https://cdn.bootcss.com/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'hover',
          placement: 'left',
          icon: 'ℬ'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                
                
                

                

                

                
                    <li>
                        <a target="_blank"  href="https://github.com/testguowei">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                

                

                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; 郭伟 2019 
                    <br>
                    Theme by <a href="http://beantech.org">BeanTech</a> 
                    <span style="display: inline-block; margin: 0 5px;">
                        <i class="fa fa-heart"></i>
                    </span> 
                    re-Ported by <a href="http://www.huweihuang.com">胡伟煌</a> | 
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huweihuang&repo=hexo-theme-huweihuang&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js"></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js"></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- 
     Because of the native support for backtick-style fenced code blocks 
     right within the Markdown is landed in Github Pages, 
     From V1.6, There is no need for Highlight.js, 
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0  
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/    
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->


<!-- jquery.tagcloud.js -->
<script>
    // only load tagcloud.js in tag.html
    if($('#tag_cloud').length !== 0){
        async("http://www.helloblog.top/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                //size: {start: 1, end: 1, unit: 'em'},
                color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>

<!--fastClick.js -->
<script>
    async("https://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->


<script>
    // dynamic User by Hux
    var _gaId = 'UA-XXXXXXXX-X';
    var _gaDomain = 'yoursite';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>




<!-- Baidu Tongji -->

<script>
    // dynamic User by Hux
    var _baId = 'xxx';

    // Originial
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?" + _baId;
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
</script>






	<a id="rocket" href="#top" class=""></a>
	<script type="text/javascript" src="/js/totop.js?v=1.0.0" async=""></script>
    <script type="text/javascript" src="/js/toc.js?v=1.0.0" async=""></script>
<!-- Image to hack wechat -->
<img src="http://www.helloblog.top/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
